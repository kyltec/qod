!function(e){e(document).ready(function(){e("#new-quote-button").on("click",function(o){o.preventDefault,lastPage=document.URL,e.ajax({method:"GET",url:qod_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1"}).done(function(o){console.log(o),e(".entry-content").empty(),e(".entry-content").append(o[0].content.rendered),e(".entry-title").empty(),e(".entry-title").append(o[0].title.rendered),e(".source").empty(),o[0]._qod_quote_source_url.length>0?e(".source").append(` &nbsp;, <a target="_blank" href="${o[0]._qod_quote_source_url}">${o[0]._qod_quote_source}</a>`):e(".source").append(` &nbsp; ${o[0]._qod_quote_source}`),history.pushState(null,null,qod_vars.home_url+"/"+o[0].slug)}).fail(function(o){e(".entry-content").empty(),e(".entry-content").append("<p>Sorry an error has occured</p>"),console.log(o)})}),e(window).on("popstate",function(){window.location.replace(lastPage)}),e("#quote-submission-form").on("submit",function(o){o.preventDefault(),function(){let o=e("#quote-author").val();const t=e("#quote-content").val(),n=e("#quote-source").val(),r=e("#quote-source-url").val(),u=e("#quote-submission-form"),s=e(".quote-submission-wrapper");""==o&&""!=t&&(o="Anonymous");e.ajax({method:"POST",url:qod_vars.rest_url+"wp/v2/posts",data:{title:o,content:t,_qod_quote_source_url:r,_qod_quote_source:n,status:"publish"},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",qod_vars.nonce)}}).done(function(e){u.slideUp(),s.append("<p>Thanks for your submission<p>")}).fail(function(o){e(".error-msg").toggle(),console.log("error")})}()})})}(jQuery);